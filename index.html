<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coloso NOVA ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        /* AI Score Colors */
        .score-9 { background-color: #10b981; color: white; } /* Emerald */
        .score-8 { background-color: #f59e0b; color: white; } /* Amber */
        .score-7 { background-color: #f97316; color: white; } /* Orange */
        /* CRM Styling */
        .kanban-column { min-height: 500px; background-color: #ffffff; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); }
        .kanban-card { transition: transform 0.2s, box-shadow 0.2s; }
        .kanban-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); }
        .tab-active { background-color: #4f46e5; color: white; }
    </style>
    <script>
        // ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬ ë° ìƒìˆ˜
        let activeTab = 'dashboard';
        let instructors = [];
        const ITEMS_PER_PAGE = 10; // í˜ì´ì§€ë‹¹ 10ê°œ ë¦¬ìŠ¤íŠ¸
        let currentPage = 1;
        const plannerName = "ê¹€íƒœí˜• í”Œë˜ë„ˆ"; // ê¸°íšì ì´ë¦„ ë”ë¯¸ ë°ì´í„°

        // ì•„ì´ì½˜ (ë¡œê³ ) SVG ì •ì˜
        const logoSVG = {
            'Instagram': `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-pink-500"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>`,
            'Twitter/X': `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="text-gray-800"><path d="M18.9 20.3c-.6 0-1.2-.2-1.8-.7-.2-.2-.5-.3-.9-.3h-.1c-1.3 0-2.6-.5-3.8-1.5-2.8-2.3-4.5-5.5-4.7-9.4H8c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h-.1c.3-.8.6-1.6 1.1-2.4 0 0 .1-.2.4-.2.2-.1.5-.1.7.1l.6.6c.6.6 1.3 1 2.1 1.2.9.2 1.8.1 2.6-.3.1-.1.3-.1.5 0 .2.1.3.3.3.5 0 .2 0 .4-.1.6-1.5 3.3-1.6 7.1-.1 10.3 1.3 2.9 3.5 4.8 6 5.8 0 0 .1 0 .2 0 .6 0 1-.5 1-1.1s-.5-1.1-1.1-1.1c-.8 0-1.5-.4-2.1-1.1-.3-.4-.7-.7-1.2-.9-.4-.1-.8-.2-1.2-.2-.5 0-1 .1-1.4.3-.7.4-1.2 1-1.5 1.7-.1.2-.3.4-.6.4z"/></svg>`,
            'Behance': `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M14.92 12c-2.7 0-4.9-2.2-4.9-4.9S12.22 2.2 14.92 2.2h4.9s.7 1.7.7 2.7V12h-5.6zm.5-7.8c1.7 0 3.2 1.4 3.2 3.2s-1.5 3.2-3.2 3.2h-3.2c1.7 0 3.2-1.4 3.2-3.2s-1.5-3.2-3.2-3.2h3.2zM21 17.5c0 2.5-2 4.5-4.5 4.5H3V12h13.5c2.5 0 4.5 2 4.5 4.5zM3 17.5h13.5c1.7 0 3.2-1.4 3.2-3.2s-1.5-3.2-3.2-3.2H3v6.4z"></path></svg>`
        };
        const gmailIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-500"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>`;


        const funnelStages = {
            'Qualified': 'ì ê²© í›„ë³´ (AI ë°œêµ´)',
            'Initial Contact Sent': 'ì´ˆê¸° ì»¨íƒ ì™„ë£Œ',
            'In Communication': 'í˜‘ì˜ ì§„í–‰ ì¤‘',
            'Contract': 'ê³„ì•½ ë‹¨ê³„'
        };

        // ì‹œì—°ìš© ì´ˆê¸° ë”ë¯¸ ë°ì´í„° (ì´ 12ê°œë¡œ í™•ì¥)
        const initialInstructors = [
            { id: 101, name: "ArtValkyrie", platform: "Instagram", stage: "Qualified", url: "https://instagram.com/artvalkyrie", followers: "125K", engagement: "15%", aiScore: 9.3, style: "ì‚¬ì´ë²„í‘í¬ ë””ìì¸", trend: "íƒœêµ­ ì‹œì¥", comment: "í€„ë¦¬í‹° ìµœìƒ, ì½œë¡œì†Œ ì¤‘ë³µ ë‚®ìŒ.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "artvalkyrie@gmail.com" },
            { id: 102, name: "PixelSmith", platform: "Twitter/X", stage: "Qualified", url: "https://x.com/pixelsmith", followers: "45K", engagement: "22%", aiScore: 8.7, style: "ë ˆíŠ¸ë¡œ í”½ì…€ ì•„íŠ¸", trend: "ê¸€ë¡œë²Œ ìˆ˜ìš”", comment: "íŒ¬ë¤ ê°•ë ¥, ì»¤ë¦¬í˜ëŸ¼ ë…¼ì˜ í•„ìš”.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "pixelsmith" },
            { id: 103, name: "DigitalMonk", platform: "Behance", stage: "Qualified", url: "https://behance.net/digitalmonk", followers: "80K", engagement: "7%", aiScore: 9.0, style: "ë™ì–‘í™” ì¼ëŸ¬ìŠ¤íŠ¸", trend: "ì¼ë³¸ ì‹œì¥", comment: "ë…ë³´ì  ìŠ¤íƒ€ì¼, ì ì¬ ê³ ê° ì¸µ í™•ì‹¤.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "digitalmonk@gmail.com" },
            { id: 104, name: "ConceptDreamer", platform: "Twitter/X", stage: "Qualified", url: "https://x.com/conceptdreamer", followers: "110K", engagement: "14%", aiScore: 8.8, style: "ì»¨ì…‰ ì•„íŠ¸", trend: "ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸", comment: "ê¸ì •ì  íšŒì‹ , ë¯¸íŒ… ì‹œê°„ ì¡°ìœ¨ ì¤‘.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "conceptdreamer" },
            { id: 105, name: "VibeSketch", platform: "Behance", stage: "Qualified", url: "https://behance.net/vibesketch", followers: "30K", engagement: "10%", aiScore: 7.9, style: "íŒ¨ì…˜ ìŠ¤ì¼€ì¹˜", trend: "ì •ì²´ ì¤‘", comment: "ë‹ˆì¹˜ ë§ˆì¼“, ì„±ì¥ë¥  ì²´í¬ í•„ìš”.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "vibesketch@gmail.com" },
            { id: 106, name: "VoxelGenius", platform: "Instagram", stage: "Qualified", url: "https://instagram.com/voxelgenius", followers: "55K", engagement: "19%", aiScore: 8.5, style: "ë³µì…€ 3D ëª¨ë¸ë§", trend: "ë©”íƒ€ë²„ìŠ¤ ì¸ê¸°", comment: "ìƒˆë¡œìš´ ë¶„ì•¼ì˜ ì„ êµ¬ì, ì‹œì¥ í…ŒìŠ¤íŠ¸ ì í•©.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "voxelgenius@gmail.com" },
            { id: 107, name: "LineAnimator", platform: "Twitter/X", stage: "Qualified", url: "https://x.com/lineanimator", followers: "95K", engagement: "16%", aiScore: 9.1, style: "2D ë¼ì¸ ì• ë‹ˆë©”ì´ì…˜", trend: "ë°”ì´ëŸ´ ê°€ëŠ¥ì„± ë†’ìŒ", comment: "ë‹¨ìˆœí•˜ì§€ë§Œ ë§¤ë ¥ì ì¸ ì½˜í…ì¸ .", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "lineanimator" },
            { id: 108, name: "Photorealist", platform: "Behance", stage: "Qualified", url: "https://behance.net/photorealist", followers: "130K", engagement: "5%", aiScore: 8.2, style: "ê·¹ì‚¬ì‹¤ì£¼ì˜ í˜ì¸íŒ…", trend: "ê³ ê¸‰ ìŠ¤í‚¬ ì‹œì¥", comment: "ì••ë„ì ì¸ ê¸°ìˆ ë ¥, ê°•ì˜ ë‚œì´ë„ ì¡°ì ˆ í•„ìš”.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "photorealist@gmail.com" },
            { id: 109, name: "CreativeCoder", platform: "Instagram", stage: "Qualified", url: "https://instagram.com/creativecoder", followers: "40K", engagement: "17%", aiScore: 7.8, style: "í”„ë¡œê·¸ë˜ë° ì•„íŠ¸", trend: "ì‹ ê¸°ìˆ  ê²°í•©", comment: "ìƒˆë¡œìš´ ì‹œë„, ê¸°ìˆ ì  ê²€ì¦ í•„ìš”.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "creativecoder@gmail.com" },
            { id: 110, name: "CharcoalMaster", platform: "Twitter/X", stage: "Qualified", url: "https://x.com/charcoalmaster", followers: "65K", engagement: "11%", aiScore: 8.4, style: "ì „í†µ ìˆ¯ ë“œë¡œì‰", trend: "í´ë˜ì‹ ì•„íŠ¸", comment: "ì•ˆì •ì ì¸ ìˆ˜ìš”ì¸µ í™•ë³´.", selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: "charcoalmaster" },
            
            { id: 201, name: "NeonSculptor", platform: "Instagram", stage: "Initial Contact Sent", url: "https://instagram.com/neonsculptor", followers: "180K", engagement: "12%", aiScore: 9.5, style: "ë„¤ì˜¨ 3D ëª¨ë¸ë§", trend: "ë¯¸êµ­ íŠ¸ë Œë“œ", comment: "ìµœê³  ì ìˆ˜, ì¦‰ì‹œ ì»¨íƒ í•„ìš”.", selected: false, lastContact: { date: "2025-10-01", medium: "Gmail", planner: plannerName, isReplied: false, content: "ì•ˆë…•í•˜ì„¸ìš”, NeonSculptorë‹˜. ì €í¬ ColosoëŠ” ì—°ì‚¬ë‹˜ì˜ ë„¤ì˜¨ 3D ëª¨ë¸ë§ ì‘í’ˆì— í° ê°ëª…ì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ê°•ì˜ ì œì•ˆì„œ ì²¨ë¶€í•©ë‹ˆë‹¤." }, lastResponse: null, contactTarget: "neonsculptor@gmail.com" },
            { id: 202, name: "InkFlow", platform: "Twitter/X", stage: "Initial Contact Sent", url: "https://x.com/inkflow", followers: "60K", engagement: "18%", aiScore: 8.5, style: "ì¹´íˆ° ë“œë¡œì‰", trend: "ë†’ì€ í˜¸í™˜ì„±", comment: "ëŒ€ì¤‘ì  ìŠ¤íƒ€ì¼, ì ‘ê·¼ì„± ì¢‹ìŒ.", selected: false, lastContact: { date: "2025-10-05", medium: "Instagram DM", planner: plannerName, isReplied: false, content: "ì•ˆë…•í•˜ì„¸ìš”! ì €í¬ëŠ” InkFlowë‹˜ì˜ ì¹´íˆ° ë“œë¡œì‰ ê°•ì˜ë¥¼ ì œì•ˆë“œë¦½ë‹ˆë‹¤. í™•ì¸ ë¶€íƒë“œë ¤ìš”." }, lastResponse: null, contactTarget: "inkflow" },
            
            { 
                id: 301, name: "MotionWizard", platform: "Instagram", stage: "In Communication", url: "https://instagram.com/motionwizard", followers: "200K", engagement: "10%", aiScore: 9.1, style: "ëª¨ì…˜ ê·¸ë˜í”½", trend: "ë†’ì€ ê²€ìƒ‰ëŸ‰", comment: "ì½œë¡œì†Œ ê°•ì˜ ì œì•ˆ ìˆ˜ë½.", selected: false, 
                lastContact: { date: "2025-09-20", medium: "Gmail", planner: plannerName, isReplied: true, content: "ì œì•ˆì„œ ë°œì†¡ (ì´ˆê¸° ì œì•ˆ)" },
                lastResponse: { medium: "Instagram DM", date: "2025-09-23", summary: "ì£¼ì œ ì¡°ì • ìš”ì²­: 'ê¸°ì´ˆ ëª¨ì…˜' ëŒ€ì‹  'ê³ ê¸‰ ì´í™íŠ¸'ë¡œ ì§„í–‰ í¬ë§.", fullContent: "DM ë‚´ìš©: ì œì•ˆ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤! ê¸°ì´ˆ ê³¼ì •ì€ ì´ë¯¸ ë§ì€ ì±„ë„ì—ì„œ ë‹¤ë£¨ê³  ìˆì–´, ì €ëŠ” ê³ ê¸‰ í…Œí¬ë‹‰(íŒŒí‹°í´/ì‹œë®¬ë ˆì´ì…˜) ìœ„ì£¼ë¡œ ì§„í–‰í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ë‚´ë¶€ ê²€í†  ë¶€íƒë“œë ¤ìš”.", followUpDays: 20, todo: "ê°•ì˜ ì£¼ì œ 'ê³ ê¸‰ ì´í™íŠ¸'ë¡œ ì¡°ì • ë° ì»¤ë¦¬í˜ëŸ¼ ì´ˆì•ˆ ì¬ì „ë‹¬." }, contactTarget: "motionwizard"
            },
            { 
                id: 302, name: "WebFlowMaster", platform: "Behance", stage: "In Communication", url: "https://behance.net/webflowmaster", followers: "50K", engagement: "8%", aiScore: 8.0, style: "ì›¹ ë””ìì¸/UX", trend: "ì‹¤ë¬´ ìˆ˜ìš”", comment: "ëª¨ë“  ì¡°ê±´ í•©ì˜ ì™„ë£Œ.", selected: false, 
                lastContact: { date: "2025-09-25", medium: "Gmail", planner: plannerName, isReplied: true, content: "ê°•ì˜ë£Œ ì¬ì¡°ì • ìš”ì²­" },
                lastResponse: { medium: "Gmail", date: "2025-10-01", summary: "ê°•ì˜ë£Œ í˜‘ìƒ ìš”ì²­ (ê¸°ì¡´ ì œì•ˆ ëŒ€ë¹„ 15% ì¸ìƒ í¬ë§).", fullContent: "ë©”ì¼ ë‚´ìš©: ì œì•ˆì„œ ì˜ ë°›ì•˜ìŠµë‹ˆë‹¤. ê°•ì˜ ì£¼ì œëŠ” ë§ˆìŒì— ë“­ë‹ˆë‹¤. ë‹¤ë§Œ, ì´ ì •ë„ ê·œëª¨ì˜ ê°•ì˜ë¼ë©´ ê°•ì˜ë£Œë¥¼ 15% ì¸ìƒí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ì£¼ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. íšŒì‹  ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤.", followUpDays: 12, todo: "ê°•ì˜ë£Œ ì¡°ì • ì¬ë¬´íŒ€ê³¼ í˜‘ì˜ ë° ì¬ì œì•ˆ." }, contactTarget: "webflowmaster@gmail.com"
            },
            
            { id: 401, name: "GameArtist", platform: "Instagram", stage: "Contract", url: "https://instagram.com/gameartist", followers: "150K", engagement: "13%", aiScore: 9.6, style: "ê²Œì„ ì›í™”", trend: "ìµœëŒ€ ì¸ê¸°", comment: "ìµœì¢… ê³„ì•½ì„œ ì„œëª… ëŒ€ê¸°.", selected: false, lastContact: { date: "2025-10-08", medium: "Gmail", planner: plannerName, isReplied: false, content: "ê³„ì•½ ì¡°ê±´ ìµœì¢… í•©ì˜" }, lastResponse: null, contractDraft: "GameArtist ê°•ì˜ ì œì‘ ê³„ì•½ì„œ\n\n1. ê°•ì˜ëª…: [ìµœì‹  íŠ¸ë Œë“œ ê²Œì„ ì›í™”]\n2. ì—°ì‚¬: GameArtist\n3. ê°•ì˜ë£Œ: 50,000,000ì› (ìµœì¢… í˜‘ì˜)\n4. ê³„ì•½ì¼: 2025ë…„ 10ì›” 13ì¼\n\n[ì´í•˜ ìƒì„¸ ì¡°í•­ ìƒëµ]", contactTarget: "gameartist@gmail.com" },
        ];
        
        // ì´ˆê¸°í™”
        instructors = [...initialInstructors];

        // íƒ­ ë³€ê²½
        function setTab(tabName) {
            activeTab = tabName;
            currentPage = 1; // íƒ­ ë³€ê²½ ì‹œ í˜ì´ì§€ ì´ˆê¸°í™”
            renderApp();
        }

        // --- ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---

        // ëª¨ë‹¬ í‘œì‹œ (alert ëŒ€ì²´)
        function showModal(title, message, isSuccess = false) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-body').innerHTML = message;
            
            const icon = document.getElementById('modal-icon');
            icon.innerHTML = isSuccess 
                ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>` 
                : `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>`;
            
            document.getElementById('custom-modal').classList.remove('hidden');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('custom-modal').classList.add('hidden');
            // 'í˜‘ì˜ ì§„í–‰ ì¤‘' íƒ­ì—ì„œ íšŒì‹  í›„ ëª¨ë‹¬ ë‹«ì„ ë•Œ CRM ëŒ€ì‹œë³´ë“œë¥¼ ë¦¬ë¡œë“œí•˜ì—¬ ì—…ë°ì´íŠ¸ ë°˜ì˜
            if (activeTab === 'crm') {
                 renderContactManagement();
            }
        }

        // PDF ë‹¤ìš´ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜
        function downloadPdf(filename) {
            const contractContent = document.getElementById('contract-editor').value;
            // PDF íŒŒì¼ ë‚´ìš©ì„ ìƒì„± (ì‹¤ì œ PDF ìƒì„±ì€ ì•„ë‹˜)
            const pdfContent = `Coloso ê°•ì˜ ê³„ì•½ì„œ\n\n${contractContent}`;
            const blob = new Blob([pdfContent], { type: 'application/pdf' });
            
            // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„± ë° í´ë¦­
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            showModal('ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!', `<strong>${filename}</strong> íŒŒì¼ì„ PDF í˜•ì‹ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.`, true);
        }
        
        // ì „ì†¡ í™•ì¸ ëª¨ë‹¬ (1ë‹¨ê³„: ì „ì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?)
        function confirmSendTemplate(id) {
            const contentInput = document.getElementById('contact-content');
            if (!contentInput || !contentInput.value.trim()) {
                showModal('ì•Œë¦¼', 'ë©”ì¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ëª¨ë‹¬ ì´ˆê¸°í™”
            document.getElementById('modal-body').innerHTML = `<p class="text-md font-semibold">ì„ íƒëœ ì—°ì‚¬ì—ê²Œ ì»¨íƒ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p><p class="text-sm text-gray-500 mt-2">ì „ì†¡ í›„ 'Creator Contact Management'ì—ì„œ í˜„í™© ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>`;
            document.getElementById('modal-title').innerText = 'ì „ì†¡ í™•ì¸';

            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML += `<div class="mt-4 flex justify-end space-x-2"><button onclick="closeModal(); sendTemplateConfirmed(${id});" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">ë„¤</button><button onclick="closeModal()" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">ì•„ë‹ˆì˜¤</button></div>`;
            document.getElementById('custom-modal').classList.remove('hidden');
        }

        // ì „ì†¡ ì™„ë£Œ ëª¨ë‹¬ (2ë‹¨ê³„: ì „ì†¡ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤)
        function sendTemplateConfirmed(id) {
            const selectedInstructor = instructors.find(inst => inst.id === id);
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸: ìŠ¤í…Œì´ì§€ ë³€ê²½
            instructors = instructors.map(inst => 
                inst.id === id ? { ...inst, stage: 'Initial Contact Sent', selected: false, 
                    lastContact: { 
                        date: new Date().toISOString().slice(0, 10), 
                        medium: document.getElementById('contact-channel').value, 
                        planner: plannerName, 
                        isReplied: false, 
                        content: document.getElementById('contact-content').value 
                    } 
                } : { ...inst, selected: false } // ëª¨ë“  ì„ íƒ í•´ì œ
            );

            showModal('ì „ì†¡ ì™„ë£Œ!', `
                <p class="text-xl font-bold text-green-600 mb-2">âœ… ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                <p class="text-md text-gray-700">${selectedInstructor.name}ë‹˜ì—ê²Œ ì»¨íƒ ë©”ì‹œì§€ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <p class="text-sm text-gray-500 mt-2">í˜„í™©ì€ 'Creator Contact Management'ì—ì„œ 'ì´ˆê¸° ì»¨íƒ ì™„ë£Œ' ìŠ¤í…Œì´ì§€ë¡œ ì´ë™í•˜ì—¬ ê´€ë¦¬í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            `, true);
            
            // ì™„ë£Œ í›„ í…œí”Œë¦¿ ì˜ì—­ ì´ˆê¸°í™” ë° ëŒ€ì‹œë³´ë“œ ë¦¬ë¡œë“œ
            renderCreatorDashboard();
        }

        // --- Tab 1: Creator Dashboard (ì—°ì‚¬ ë°œêµ´) ê¸°ëŠ¥ ---

        // ì—°ì‚¬ ì„ íƒ/í•´ì œ
        function toggleSelection(id) {
            instructors = instructors.map(inst => 
                inst.id === id ? { ...inst, selected: !inst.selected } : { ...inst, selected: false } // ë‹¨ì¼ ì„ íƒ ê°•ì œ
            );
            renderCreatorDashboard();
        }

        // ì—°ì‚¬ ì‚­ì œ
        function deleteInstructor(id, name) {
            if (confirm(`ì •ë§ë¡œ ${name} ì—°ì‚¬ í›„ë³´ë¥¼ ëª©ë¡ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                instructors = instructors.filter(inst => inst.id !== id);
                renderCreatorDashboard();
            }
        }

        // ìƒˆ ì—°ì‚¬ ì¶”ê°€ ì‹œë®¬ë ˆì´ì…˜
        function addManualInstructor() {
            const platform = document.getElementById('manual-platform').value;
            const creatorId = document.getElementById('manual-id').value.trim();

            if (!creatorId) {
                showModal('ì…ë ¥ ì˜¤ë¥˜', 'Creator ID ë˜ëŠ” URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¤‘ë³µ ê²€ì‚¬
            if (instructors.some(inst => inst.name === creatorId)) {
                showModal('ì¤‘ë³µ ì˜¤ë¥˜', `${creatorId}ë‹˜ì€ ì´ë¯¸ ëª©ë¡ì— ì¡´ì¬í•©ë‹ˆë‹¤.`);
                document.getElementById('manual-id').value = '';
                return;
            }

            const newId = Date.now();
            const newInstructor = {
                id: newId,
                name: creatorId,
                platform: platform,
                stage: "Qualified",
                url: platform === 'Instagram' ? `https://instagram.com/${creatorId}` : platform === 'Twitter/X' ? `https://x.com/${creatorId}` : `https://behance.net/${creatorId}`,
                followers: "N/A", engagement: "N/A", aiScore: 'Loading',
                style: "AI ë¶„ì„ ì¤‘...", trend: "AI ë¶„ì„ ì¤‘...", 
                comment: `<div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden"><div class="h-2 bg-indigo-500 animate-[pulse_1s_infinite]"></div></div> AIê°€ ì†Œì…œ ë°ì´í„° ìˆ˜ì§‘ ë° ë©€í‹°ëª¨ë‹¬ ë¶„ì„ì„ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. (3ì´ˆ ì†Œìš”)`,
                selected: false, lastContact: { date: "N/A", medium: "N/A", planner: "N/A", isReplied: false }, lastResponse: null, contactTarget: platform === 'Instagram' || platform === 'Twitter/X' ? creatorId : `${creatorId.toLowerCase().replace(/\s/g, '')}@gmail.com`
            };

            instructors.unshift(newInstructor);
            setPage(1); // ìƒˆ í•­ëª© ì¶”ê°€ ì‹œ 1í˜ì´ì§€ë¡œ ì´ë™
            renderCreatorDashboard();

            // 3ì´ˆ í›„ AI ë¶„ì„ ì™„ë£Œ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                instructors = instructors.map(inst => {
                    if (inst.id === newId) {
                        return { 
                            ...inst, 
                            aiScore: 8.9, 
                            followers: "75K", engagement: "11%",
                            style: "ë¯¸ë‹ˆë©€ë¦¬ì¦˜ ì›¹íˆ°", trend: "í•œêµ­ ì‹œì¥ ì‹ í¥ íŠ¸ë Œë“œ", 
                            comment: "ìˆ˜ë™ ì¶”ê°€ëœ ì—°ì‚¬. AI ìŠ¤ì½”ì–´ë§ ì™„ë£Œ. ì¦‰ì‹œ ì»¨íƒ ì¶”ì²œ." 
                        };
                    }
                    return inst;
                });
                renderCreatorDashboard();
            }, 3000);

            document.getElementById('manual-id').value = '';
        }
        
        // í…œí”Œë¦¿ ìƒì„± ë° ì—ë””í„° ë¡œë“œ
        function generateTemplateContent(isReply = false, replyInstId = null) {
            const selectedInstructor = isReply 
                ? instructors.find(inst => inst.id === replyInstId)
                : instructors.find(inst => inst.selected);

            if (!selectedInstructor) return;

            // LLM ì‹œë®¬ë ˆì´ì…˜: ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ í…œí”Œë¦¿ ì±„ìš°ê¸°
            const subjectPrefix = isReply ? "Re: " : "";
            const subjectContent = isReply ? `ê°•ì˜ë£Œ ì¡°ì • ì¬ì œì•ˆ - ${selectedInstructor.name}ë‹˜` : `${selectedInstructor.style.split(' ')[0]} ê°•ì˜ ì œì•ˆ`;
            const subject = subjectPrefix + subjectContent;
            
            let content = '';
            
            if (isReply) {
                // íšŒì‹  ë‚´ìš© ìƒì„± ì‹œë®¬ë ˆì´ì…˜
                content = `ì•ˆë…•í•˜ì„¸ìš”, ${selectedInstructor.name}ë‹˜.

ì €í¬ ë‚´ë¶€ ê²€í†  ê²°ê³¼, ìš”ì²­í•˜ì‹  ê°•ì˜ë£Œ ì¸ìƒ(15%)ì— ëŒ€í•´ ì¼ë¶€ ì¡°ì •ëœ ì¡°ê±´ìœ¼ë¡œ ì¬ì œì•ˆ ë“œë¦½ë‹ˆë‹¤.
(AI ê¸°ë°˜ ìµœì  í˜‘ìƒ ì¡°ê±´ ë„ì¶œ)
ê¸°ì¡´ ì œì•ˆ ëŒ€ë¹„ 10% ì¸ìƒëœ [XX,XXX,XXXì›]ì„ ìµœì¢… ì œì•ˆí•˜ë©°, ëŒ€ì‹  ê°•ì˜ ëŸ°ì¹­ í›„ 6ê°œì›”ê°„ì˜ í”„ë¡œëª¨ì…˜ ì§„í–‰ì— í˜‘ì¡°ë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

[AI ìš”ì•½: ì´ì „ ì‘ë‹µ: ${selectedInstructor.lastResponse.summary}]
ë¹ ë¥¸ íšŒì‹  ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.
- ${plannerName} ë“œë¦¼`;
            } else {
                // ì´ˆê¸° ì»¨íƒ ë‚´ìš© ìƒì„± ì‹œë®¬ë ˆì´ì…˜
                content = `ì•ˆë…•í•˜ì„¸ìš”, ${selectedInstructor.name}ë‹˜.

ì €ëŠ” ê¸€ë¡œë²Œ ì˜¨ë¼ì¸ êµìœ¡ í”Œë«í¼ Colosoì˜ ì½˜í…ì¸  ê¸°íš ë‹´ë‹¹ì ${plannerName}ì…ë‹ˆë‹¤.

ìµœê·¼ ì €í¬ NOVA AI ì‹œìŠ¤í…œì´ ì—°ì‚¬ë‹˜ì˜ [${selectedInstructor.style}] ì‘ì—…ë¬¼ì— ì£¼ëª©í–ˆìŠµë‹ˆë‹¤. (AI ìŠ¤ì½”ì–´: ${selectedInstructor.aiScore}ì ) 
ì—°ì‚¬ë‹˜ì˜ ì‘í’ˆì´ [${selectedInstructor.trend}] íŠ¸ë Œë“œì— ë¶€í•©í•˜ë©°, Colosoì™€ í•¨ê»˜í•˜ë©´ í­ë°œì ì¸ ë°˜ì‘ì„ ì–»ì„ ìˆ˜ ìˆì„ ê²ƒì´ë¼ í™•ì‹ í•©ë‹ˆë‹¤.

ì €í¬ëŠ” ì—°ì‚¬ë‹˜ì˜ ì „ë¬¸ ë¶„ì•¼ì¸ [${selectedInstructor.style}]ì— ëŒ€í•œ ì˜¨ë¼ì¸ ê°•ì˜ ê¸°íšì„ ì œì•ˆë“œë¦½ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ íšŒì‹  ì£¼ì‹œë©´ ë…¼ì˜ ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.
- ${plannerName} ë“œë¦¼`;
            }

            const containerId = isReply ? 'reply-content' : 'template-content';
            const container = document.getElementById(containerId);
            container.innerHTML = `
                <div class="space-y-4 p-4 bg-white rounded-lg border">
                    <label class="block">
                        <span class="text-sm font-medium text-gray-700">ìˆ˜ì‹  ì±„ë„ (API ì—°ë™)</span>
                        <select id="contact-channel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border">
                            <option value="Gmail">Gmail (ë©”ì¼ API)</option>
                            <option value="Instagram DM">Instagram DM (SNS API)</option>
                            <option value="X Message">X Message (SNS API)</option>
                        </select>
                    </label>
                    <label class="block">
                        <span class="text-sm font-medium text-gray-700">ìˆ˜ì‹ ì ID/ì£¼ì†Œ</span>
                        <input type="text" id="contact-target-input" value="${selectedInstructor.contactTarget}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border bg-gray-50">
                    </label>
                    <label class="block">
                        <span class="text-sm font-medium text-gray-700">ì œëª© (LLM ìë™ ìƒì„± & ìˆ˜ì • ê°€ëŠ¥)</span>
                        <input type="text" id="contact-subject" value="${subject}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border">
                    </label>
                    <label class="block">
                        <span class="text-sm font-medium text-gray-700">ë‚´ìš© (LLM ìë™ ìƒì„± & ìˆ˜ì • ê°€ëŠ¥)</span>
                        <textarea id="contact-content" rows="8" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border">${content}</textarea>
                    </label>
                    ${isReply ? `<button onclick="confirmSendReply(${selectedInstructor.id})" class="mt-3 w-full bg-green-600 text-white font-bold py-2 rounded-lg hover:bg-green-700 transition">íšŒì‹  ì „ì†¡</button>` : `<button onclick="confirmSendTemplate(${selectedInstructor.id})" class="mt-3 w-full bg-green-600 text-white font-bold py-2 rounded-lg hover:bg-green-700 transition">ì „ì†¡</button>`}
                </div>
            `;
        }

        // íšŒì‹  ì „ì†¡ í™•ì¸ ëª¨ë‹¬
        function confirmSendReply(id) {
            if (!document.getElementById('contact-content') || !document.getElementById('contact-content').value.trim()) {
                showModal('ì•Œë¦¼', 'íšŒì‹  ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            document.getElementById('modal-body').innerHTML = `<p class="text-md font-semibold">AI ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ íšŒì‹  ë‚´ìš©ì„ ì „ì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>`;
            document.getElementById('modal-title').innerText = 'íšŒì‹  ì „ì†¡ í™•ì¸';

            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML += `<div class="mt-4 flex justify-end space-x-2"><button onclick="closeModal(); sendReplyConfirmed(${id});" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">ë„¤</button><button onclick="closeModal()" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">ì•„ë‹ˆì˜¤</button></div>`;
            document.getElementById('custom-modal').classList.remove('hidden');
        }

        // íšŒì‹  ì „ì†¡ ì‹¤í–‰ í›„ ì™„ë£Œ ëª¨ë‹¬
        function sendReplyConfirmed(id) {
            const selectedInstructor = instructors.find(inst => inst.id === id);
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸: In Communication ìƒíƒœ ìœ ì§€ (ì‹œì—°ìš©)
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” lastContact/lastResponse í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•¨
            showModal('íšŒì‹  ì „ì†¡ ì™„ë£Œ!', `
                <p class="text-xl font-bold text-green-600 mb-2">âœ… íšŒì‹ ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                <p class="text-md text-gray-700">${selectedInstructor.name}ë‹˜ì—ê²Œ í˜‘ì˜ ë‚´ìš©ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <p class="text-sm text-gray-500 mt-2">ë‹¤ìŒ íšŒì‹ ì„ ê¸°ë‹¤ë¦¬ë©° To-Doë¥¼ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”.</p>
            `, true);
        }

        // ê³„ì•½ì„œ ë°œì†¡ ì‹œë®¬ë ˆì´ì…˜
        function sendContractEmail(name) {
            const contractContent = document.getElementById('contract-editor').value;
            const emailAddress = prompt(`ìµœì¢… ê³„ì•½ì„œë¥¼ ìˆ˜ì‹ í•  ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: ${name.toLowerCase().replace(/\s/g, '')}@gmail.com):`);
            
            if (emailAddress) {
                showModal('ìµœì¢… ê³„ì•½ì„œ ë°œì†¡ ì‹œë®¬ë ˆì´ì…˜', `
                    <p class="text-md font-semibold">Gmail API ì—°ë™ ë°œì†¡</p>
                    <div class="p-4 bg-gray-50 rounded-lg text-sm space-y-1 mt-3">
                        <p><strong>ìˆ˜ì‹ :</strong> ${emailAddress}</p>
                        <p><strong>ì œëª©:</strong> [Coloso] ${name}ë‹˜ - ìµœì¢… ê°•ì˜ ì œì‘ ê³„ì•½ì„œ ê±´</p>
                        <p><strong>ì²¨ë¶€íŒŒì¼:</strong> ${name}_ê³„ì•½ì„œ_ìµœì¢…ë³¸.pdf (ê³„ì•½ì„œ ì´ˆì•ˆ ë‚´ìš© ê¸°ë°˜)</p>
                    </div>
                    <p class="text-green-600 font-bold mt-3">âœ… Gmail APIë¥¼ í†µí•´ ê³„ì•½ì„œ ì²¨ë¶€ ë° ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                `, true);
            }
        }


        // --- í˜ì´ì§• ë° ë Œë”ë§ ---
        function setPage(page) {
            currentPage = page;
            if (activeTab === 'dashboard') {
                renderCreatorDashboard();
            } else if (activeTab === 'crm') {
                renderContactManagement();
            }
        }

        function renderPagination(totalItems) {
            const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);
            if (totalPages <= 1) return '';

            let pages = [];
            for (let i = 1; i <= totalPages; i++) {
                pages.push(`
                    <button onclick="setPage(${i})" class="px-4 py-2 text-sm font-medium rounded-lg ${currentPage === i ? 'bg-indigo-600 text-white' : 'bg-white text-gray-700 border hover:bg-gray-100'}">
                        ${i}
                    </button>
                `);
            }
            return `<div class="flex justify-center mt-6 space-x-2">${pages.join('')}</div>`;
        }

        // íƒ­ 1 ë Œë”ë§
        function renderCreatorDashboard() {
            const container = document.getElementById('main-content');
            const selectedInstructor = instructors.find(inst => inst.selected);
            const qualifiedInstructors = instructors.filter(inst => inst.stage === 'Qualified' || inst.aiScore === 'Loading');

            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const paginatedInstructors = qualifiedInstructors.slice(startIndex, endIndex);

            const listHTML = paginatedInstructors.map(inst => {
                const scoreColor = inst.aiScore >= 9.0 ? 'score-9' : inst.aiScore >= 8.0 ? 'score-8' : inst.aiScore === 'Loading' ? 'bg-gray-300' : 'score-7';
                const scoreDisplay = inst.aiScore === 'Loading' ? `<div class="w-5 h-5 border-2 border-indigo-400 border-t-transparent rounded-full animate-spin"></div>` : inst.aiScore.toFixed(1);
                const isSelected = selectedInstructor && selectedInstructor.id === inst.id;

                return `
                    <div class="nova-card p-4 bg-white rounded-xl shadow-md flex items-start space-x-4 mb-4 border-l-4 ${isSelected ? 'border-purple-600 ring-2 ring-purple-300' : 'border-indigo-500'} transition duration-300 hover:shadow-lg">
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <div class="w-full">
                                    <div class="flex items-center space-x-2">
                                        ${logoSVG[inst.platform]}
                                        <a href="${inst.url}" target="_blank" class="text-xl font-bold text-gray-800 hover:text-indigo-600">${inst.name}</a>
                                        <span class="text-sm font-normal text-gray-500">(${inst.platform})</span>
                                    </div>
                                    <div class="mt-1 flex items-center space-x-2 text-sm text-gray-500">
                                        <span>íŒ”ë¡œì›Œ: ${inst.followers}</span>
                                        <span class="text-indigo-500">â€¢</span>
                                        <span>ì°¸ì—¬ìœ¨: ${inst.engagement}</span>
                                    </div>
                                </div>
                                <div class="text-right flex-shrink-0">
                                    <div class="font-extrabold text-2xl px-3 py-1 rounded-full flex items-center justify-center h-10 w-16 ${scoreColor}">
                                        ${scoreDisplay}
                                    </div>
                                    <p class="text-xs font-semibold text-gray-600 mt-1">AI ìŠ¤ì½”ì–´</p>
                                </div>
                            </div>
                            <div class="mt-3">
                                <p class="text-sm font-semibold text-indigo-700">AI ë¶„ì„ (ë©€í‹°ëª¨ë‹¬ LLM)</p>
                                <p class="text-sm text-gray-700 mt-1">
                                    <strong>ìŠ¤íƒ€ì¼:</strong> ${inst.style} <span class="text-gray-400">|</span> 
                                    <strong>íŠ¸ë Œë“œ:</strong> ${inst.trend}
                                </p>
                                <p class="text-xs text-gray-600 italic mt-1">${inst.comment}</p>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button onclick="deleteInstructor(${inst.id}, '${inst.name}')" class="text-sm text-red-500 hover:text-red-700">ì‚­ì œ</button>
                            </div>
                        </div>
                        <div class="flex-shrink-0">
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" ${isSelected ? 'checked' : ''} onchange="toggleSelection(${inst.id})" class="form-checkbox h-5 w-5 text-indigo-600 rounded-lg border-gray-300 focus:ring-indigo-500">
                                <span class="ml-2 text-sm font-medium text-gray-700">ì»¨íƒ ëŒ€ìƒ</span>
                            </label>
                        </div>
                    </div>
                `;
            }).join('');

            const paginationHTML = renderPagination(qualifiedInstructors.length);

            const templateHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 p-6">
                    <div class="lg:col-span-2 space-y-4">
                        <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">AI ê¸°ë°˜ ì—°ì‚¬ ìŠ¤í¬ë¦¬ë‹ ê²°ê³¼ (${qualifiedInstructors.length}ëª…)</h2>
                        <!-- ìˆ˜ë™ ì¶”ê°€ ê¸°ëŠ¥ -->
                        <div class="p-4 bg-indigo-50 rounded-xl flex items-center space-x-4 shadow-md">
                            <h3 class="font-bold text-indigo-800 flex-shrink-0">ìˆ˜ë™ ì—°ì‚¬ ì¶”ê°€</h3>
                            <select id="manual-platform" class="rounded-md border-gray-300 p-2 text-sm border">
                                <option value="Instagram">Instagram ID</option>
                                <option value="Twitter/X">X ID</option>
                                <option value="Behance">Behance URL</option>
                            </select>
                            <input type="text" id="manual-id" placeholder="ID/URL ì…ë ¥" class="flex-grow rounded-md border-gray-300 p-2 text-sm border">
                            <button onclick="addManualInstructor()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition flex-shrink-0">AI ë¶„ì„ ìš”ì²­</button>
                        </div>

                        <!-- ì—°ì‚¬ ë¦¬ìŠ¤íŠ¸ -->
                        <div id="instructor-list" class="space-y-4 max-h-[70vh] overflow-y-auto pr-2">
                            ${listHTML}
                            ${paginationHTML}
                        </div>
                    </div>

                    <!-- ì»¨íƒ í…œí”Œë¦¿ ì˜ì—­ -->
                    <div class="lg:col-span-1">
                        <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">LLM ê¸°ë°˜ ì»¨íƒ í…œí”Œë¦¿</h2>
                        <div class="p-4 bg-white rounded-xl shadow-lg mt-4 space-y-4">
                            <div class="p-3 border rounded-lg bg-gray-50">
                                <p class="font-bold text-md text-indigo-700">ì„ íƒ ì—°ì‚¬: ${selectedInstructor ? selectedInstructor.name : 'ì—†ìŒ'}</p>
                                <p class="text-xs text-gray-500">${selectedInstructor ? selectedInstructor.style : 'ì¢Œì¸¡ ëª©ë¡ì—ì„œ ì»¨íƒ ëŒ€ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.'}</p>
                            </div>
                            
                            <button onclick="generateTemplateContent()" id="generate-template-btn" class="w-full bg-purple-600 text-white font-bold py-2 rounded-lg shadow-md hover:bg-purple-700 transition ${selectedInstructor ? '' : 'opacity-50 pointer-events-none'}">
                                ğŸš€ ë§ì¶¤í˜• í…œí”Œë¦¿ ì´ˆì•ˆ ìƒì„± (Gemini LLM)
                            </button>
                            
                            <div id="template-output" class="space-y-4">
                                <!-- Template Editor/Preview -->
                                <div id="template-content">
                                    ${selectedInstructor ? '<p class="text-center text-gray-500">í…œí”Œë¦¿ ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>' : '<p class="text-center text-gray-500">ì„ íƒëœ ì—°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
                                </div>
                            </div>
                            
                            <!-- ì¤‘ë³µ ë²„íŠ¼ ì œê±° ë° ë‹¨ì¼ 'ì „ì†¡' ë²„íŠ¼ ìœ ì§€ -->
                            <button id="send-template-btn" onclick="confirmSendTemplate(${selectedInstructor ? selectedInstructor.id : 'null'})" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg shadow-lg hover:bg-green-700 transition ${selectedInstructor ? '' : 'opacity-50 pointer-events-none'}" ${selectedInstructor ? '' : 'disabled'}>
                                ì „ì†¡
                            </button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = templateHTML;
        }

        // CRM ì¹´ë“œ ë Œë”ë§
        function renderKanbanCard(inst) {
            const mediumIcon = inst.platform === 'Instagram' ? logoSVG['Instagram'] : inst.platform === 'Twitter/X' ? logoSVG['Twitter/X'] : logoSVG['Behance'];
            const lastContactMediumIcon = inst.lastResponse ? (inst.lastResponse.medium.includes('Instagram') ? logoSVG['Instagram'] : inst.lastResponse.medium.includes('X') ? logoSVG['Twitter/X'] : gmailIcon) : '';

            let additionalContent = '';
            let cardClass = "bg-white p-4 rounded-xl shadow-md mb-4 kanban-card cursor-pointer";

            if (inst.stage === 'In Communication' && inst.lastResponse) {
                const isUrgent = inst.lastResponse.followUpDays > 10;
                const followUpColor = isUrgent ? 'text-red-500 font-bold' : 'text-yellow-600';
                additionalContent = `
                    <div class="mt-2 pt-2 border-t border-gray-100 space-y-2">
                        <div class="flex items-center text-xs text-gray-600">
                            ${lastContactMediumIcon}
                            <span class="ml-1 font-semibold">${inst.lastResponse.medium} ì‘ë‹µ (D+${inst.lastResponse.followUpDays}ì¼ ê²½ê³¼)</span>
                        </div>
                        <p class="text-sm font-medium text-gray-800">${inst.lastResponse.summary}</p>
                        <p class="text-xs ${followUpColor}">ğŸš¨ í›„ì† ì•¡ì…˜ í•„ìš”: ${inst.lastResponse.todo.split(' ')[0]}...</p>
                    </div>
                `;
                cardClass += isUrgent ? " border-l-4 border-red-500" : " border-l-4 border-yellow-500";
            } else if (inst.stage === 'Contract') {
                additionalContent = `
                    <div class="mt-2 pt-2 border-t border-gray-100">
                        <p class="text-sm font-bold text-green-600">ê³„ì•½ì„œ ì´ˆì•ˆ ì¤€ë¹„ ì™„ë£Œ</p>
                        <p class="text-xs text-gray-500">ìµœì¢… ê²€í†  ë° ë°œì†¡ ëŒ€ê¸° ì¤‘</p>
                    </div>
                `;
                cardClass += " border-l-4 border-green-500";
            }
            
            return `
                <div class="${cardClass}" onclick="instDetails(${inst.id}, '${inst.stage}')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            ${mediumIcon}
                            <p class="text-lg font-bold text-gray-800">${inst.name}</p>
                        </div>
                        <span class="text-xs font-bold ${inst.aiScore >= 9.0 ? 'score-9' : inst.aiScore >= 8.0 ? 'score-8' : 'score-7'} px-2 py-0.5 rounded">${inst.aiScore.toFixed(1)}</span>
                    </div>
                    <p class="text-sm text-gray-500 mt-1">${inst.style}</p>
                    ${additionalContent}
                </div>
            `;
        }

        // íƒ­ 2 ë Œë”ë§
        function renderContactManagement() {
            const container = document.getElementById('main-content');
            
            // 1. Qualified í•­ëª© í•„í„°ë§ ë° í˜ì´ì§•
            const allQualifiedInstructors = instructors.filter(inst => inst.stage === 'Qualified' && inst.aiScore !== 'Loading');
            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const paginatedQualified = allQualifiedInstructors.slice(startIndex, endIndex);

            const kanbanHTML = Object.keys(funnelStages).map(stageKey => {
                const stageName = funnelStages[stageKey];
                
                let stageInstructors;
                let columnContent;
                let itemCount;

                if (stageKey === 'Qualified') {
                    stageInstructors = paginatedQualified;
                    itemCount = allQualifiedInstructors.length;
                    
                    // QualifiedëŠ” SNS í˜ì´ì§€ ì´ë™ ê¸°ëŠ¥ì´ ì£¼ê°€ ë˜ë„ë¡ ì„¤ì •
                    const qualifiedCards = stageInstructors.map(inst => `
                        <div class="kanban-card bg-white p-4 rounded-xl shadow-md mb-4 cursor-pointer border-l-4 border-indigo-500" onclick="openInstructorPage(${inst.id})">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    ${logoSVG[inst.platform]}
                                    <p class="text-lg font-bold text-gray-800">${inst.name}</p>
                                </div>
                                <span class="text-xs font-bold ${inst.aiScore >= 9.0 ? 'score-9' : 'score-8'} px-2 py-0.5 rounded">${inst.aiScore.toFixed(1)}</span>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">${inst.style}</p>
                            <p class="text-xs text-indigo-600 mt-2">í´ë¦­ ì‹œ SNS í˜ì´ì§€ë¡œ ì´ë™</p>
                        </div>
                    `).join('');
                    
                    columnContent = qualifiedCards + renderPagination(itemCount);
                } else {
                    stageInstructors = instructors.filter(inst => inst.stage === stageKey && inst.aiScore !== 'Loading');
                    itemCount = stageInstructors.length;
                    columnContent = stageInstructors.map(inst => renderKanbanCard(inst)).join('');
                }

                
                let contractSection = '';
                if (stageKey === 'Contract') {
                    contractSection = `
                        <div class="mt-4 p-4 bg-indigo-50 rounded-lg">
                            <h4 class="font-bold text-indigo-800">ê³„ì•½ì„œ ê´€ë¦¬ (Step 6)</h4>
                            <p class="text-sm text-gray-600 mb-2">ì¹´ë“œ í´ë¦­ ì‹œ ê³„ì•½ì„œ ì´ˆì•ˆ í¸ì§‘ ë° ë°œì†¡</p>
                            <button onclick="instDetails(${stageInstructors[0].id}, 'Contract')" class="w-full bg-indigo-500 text-white text-sm py-1.5 rounded-md hover:bg-indigo-600 transition" ${stageInstructors.length > 0 ? '' : 'disabled'}>
                                ê³„ì•½ ê´€ë¦¬ ë°”ë¡œê°€ê¸°
                            </button>
                        </div>
                    `;
                }


                return `
                    <div class="w-full lg:w-1/4 kanban-column p-4">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">${stageName} <span class="text-gray-500 text-sm">(${itemCount})</span></h3>
                        <div class="space-y-4">
                            ${columnContent}
                        </div>
                        ${contractSection}
                    </div>
                `;
            }).join('');

            const contentHTML = `
                <div class="p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Creator Contact Management (CRM Funnel)</h2>
                    <div class="flex flex-wrap lg:flex-nowrap gap-6">
                        ${kanbanHTML}
                    </div>
                </div>
            `;
            container.innerHTML = contentHTML;
        }
        
        // ì ê²© í›„ë³´ ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œ í•´ë‹¹ ì—°ì‚¬ SNS í˜ì´ì§€ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°
        function openInstructorPage(id) {
            const inst = instructors.find(i => i.id === id);
            if (inst && inst.url) {
                window.open(inst.url, '_blank');
            }
        }

        // CRM ìƒì„¸ ëª¨ë‹¬ í‘œì‹œ
        function instDetails(id, stage) {
            const inst = instructors.find(i => i.id === id);
            let title = `${inst.name} (${funnelStages[stage]})`;
            let content = '';

            if (stage === 'Qualified') {
                 // QualifiedëŠ” SNS ì—°ê²° ê¸°ëŠ¥ì´ ì£¼ê°€ ë˜ë¯€ë¡œ, ì—¬ê¸°ì„œ openInstructorPageë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ì—¬ UX í†µì¼ì„±ì„ ì œê³µ
                 openInstructorPage(id);
                 showModal('í˜ì´ì§€ ì´ë™ ì•ˆë‚´', `<p class="text-md font-semibold">${inst.name}ë‹˜ì˜ ${inst.platform} í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ì—ˆìŠµë‹ˆë‹¤.</p><p class="text-sm text-gray-500 mt-2">AI ë¶„ì„ ìƒì„¸ ì •ë³´ë¥¼ ì§ì ‘ í™•ì¸í•´ë³´ì„¸ìš”.`, false);
                 return; 
            } else if (stage === 'Initial Contact Sent' && inst.lastContact) {
                // ì´ˆê¸° ì»¨íƒ ì™„ë£Œ ìƒì„¸
                content = `
                    <div class="space-y-4">
                        <p class="text-lg font-bold text-gray-800 border-b pb-2">ì»¨íƒ ë°œì†¡ ì´ë ¥</p>
                        <div class="p-4 bg-indigo-50 rounded-lg space-y-2">
                            <p class="text-sm font-semibold text-indigo-800 flex items-center">${inst.lastContact.medium.includes('Gmail') ? gmailIcon : inst.platform === 'Instagram' ? logoSVG['Instagram'] : logoSVG['Twitter/X']} <span class="ml-2">${inst.lastContact.medium}</span> ë°œì†¡</p>
                            <p class="text-xs text-gray-600">ë°œì†¡ ì¼ì: ${inst.lastContact.date} | ë°œì†¡ ë‹´ë‹¹: ${inst.lastContact.planner}</p>
                            <p class="text-md font-medium text-gray-700 mt-2">${inst.lastContact.content.split('\n')[0].substring(0, 50)}...</p>
                            <button class="text-indigo-600 text-sm font-semibold hover:text-indigo-800 mt-1" onclick="showModal('ë°œì†¡ ì›ë³¸', '<textarea readonly class=\\'w-full h-80 p-2 border rounded-lg text-sm\\'>${inst.lastContact.content.replace(/'/g, '&#39;').replace(/"/g, '&quot;')}</textarea>', false)">ì›ë³¸ ë‚´ìš© í™•ì¸</button>
                        </div>
                        <p class="text-red-500 font-bold">âš ï¸ íšŒì‹  ëŒ€ê¸° ì¤‘ (D+${(new Date() - new Date(inst.lastContact.date)) / (1000 * 3600 * 24) | 0}ì¼ ê²½ê³¼)</p>
                    </div>
                `;
            } else if (stage === 'In Communication' && inst.lastResponse) {
                // í˜‘ì˜ ì§„í–‰ ì¤‘ ìƒì„¸ (íšŒì‹  ë° íšŒì‹  ì˜µì…˜)
                const url = inst.platform === 'Instagram' ? `https://instagram.com/${inst.name}` : inst.platform === 'Twitter/X' ? `https://x.com/${inst.name}` : inst.url; 

                content = `
                    <div class="space-y-4">
                        <p class="text-lg font-bold text-gray-800 border-b pb-2">ìµœì‹  ì‘ë‹µ ë° AI To-Do</p>
                        <div class="p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-500 space-y-2">
                            <p class="text-md font-bold text-yellow-800 flex items-center">${inst.lastResponse.medium} ì‘ë‹µ (D+${inst.lastResponse.followUpDays}ì¼ ê²½ê³¼)</p>
                            <p class="text-sm font-medium text-gray-700">${inst.lastResponse.summary}</p>
                            <p class="text-xs text-red-500 font-bold">AI To-Do: ${inst.lastResponse.todo}</p>
                            <a href="${url}" target="_blank" class="text-indigo-600 text-sm font-semibold hover:text-indigo-800 mt-1 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13l2-2 2 2"></path><path d="M12 2v10"></path><path d="M22 10V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v4"></path></svg>
                                ì‘ë‹µ ë§¤ì²´ë¡œ ì´ë™ (ìƒˆ íƒ­)
                            </a>
                        </div>
                        
                        <div class="p-4 bg-white rounded-lg shadow">
                            <h3 class="font-bold text-indigo-700 mb-2">ğŸ’¡ LLM ê¸°ë°˜ íšŒì‹  ì˜µì…˜</h3>
                            <div id="reply-content">
                                <button onclick="generateTemplateContent(true, ${inst.id}); document.getElementById('reply-content').lastElementChild.classList.remove('hidden');" class="w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600 transition">
                                    AI íšŒì‹  ë‚´ìš© ìƒì„± & í¸ì§‘
                                </button>
                            </div>
                            <!-- 'íšŒì‹  ì „ì†¡' ë²„íŠ¼ì€ í…œí”Œë¦¿ ìƒì„± í›„ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ë„ë¡ ìˆ˜ì • -->
                        </div>
                    </div>
                `;
            } else if (stage === 'Contract') {
                // ê³„ì•½ ë‹¨ê³„ ìƒì„¸
                title = `${inst.name} - ê³„ì•½ì„œ ì´ˆì•ˆ ê´€ë¦¬`;
                content = `
                    <div class="space-y-4">
                        <div class="flex space-x-4 mb-4">
                            <button onclick="generateContractDraft('${inst.name}')" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">AI ê³„ì•½ì„œ ì´ˆì•ˆ ìë™ ìƒì„±</button>
                            <button onclick="loadExistingContract('${inst.name}')" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">ê¸°ì¡´ í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                        </div>
                        <textarea id="contract-editor" class="w-full h-80 p-4 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm" placeholder="ê³„ì•½ì„œ ì´ˆì•ˆì„ ì—¬ê¸°ì— ì‘ì„±í•˜ê±°ë‚˜ AI ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.">${
                            inst.contractDraft || 'ê³„ì•½ì„œ ì´ˆì•ˆì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'
                        }</textarea>
                        
                        <div class="flex justify-between items-center pt-2 border-t">
                            <button onclick="downloadPdf('${inst.name}_ê°•ì˜_ê³„ì•½ì„œ.pdf')" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">PDF ë‹¤ìš´ë¡œë“œ</button>
                            <button onclick="sendContractEmail('${inst.name}')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition flex items-center">
                                ${gmailIcon}
                                <span class="ml-1">ìµœì¢… ê³„ì•½ì„œ ë°œì†¡ (Gmail API)</span>
                            </button>
                        </div>
                    </div>
                `;
            }

            // ëª¨ë‹¬ì„ ì—´ê¸° ì „ì— ëª¨ë‹¬ ë‚´ìš©ì„ ì„¤ì •
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-body').innerHTML = content;
            document.getElementById('custom-modal').classList.remove('hidden');
        }

        // ì „ì²´ ì•± ë Œë”ë§
        function renderApp() {
            // ì‚¬ì´ë“œë°” ì—…ë°ì´íŠ¸
            document.getElementById('tab-dashboard').classList.toggle('tab-active', activeTab === 'dashboard');
            document.getElementById('tab-crm').classList.toggle('tab-active', activeTab === 'crm');

            // ë©”ì¸ ì½˜í…ì¸  ë Œë”ë§
            if (activeTab === 'dashboard') {
                // 'dashboard' íƒ­ìœ¼ë¡œ ì „í™˜ ì‹œ, currentPageë¥¼ 1ë¡œ ì¬ì„¤ì •
                currentPage = 1; 
                renderCreatorDashboard();
            } else if (activeTab === 'crm') {
                // 'crm' íƒ­ìœ¼ë¡œ ì „í™˜ ì‹œ, currentPageë¥¼ 1ë¡œ ì¬ì„¤ì • (Qualified Funnelì˜ í˜ì´ì§•ì„ ìœ„í•´)
                currentPage = 1;
                renderContactManagement();
            }
        }

        // ì´ˆê¸° ë¡œë“œ
        window.onload = () => {
            renderApp();
        };
    </script>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Custom Modal (alert ëŒ€ì²´) -->
    <div id="custom-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full m-4">
            <div class="p-6">
                <div class="flex items-center mb-4">
                    <div id="modal-icon" class="flex-shrink-0 mr-3"></div>
                    <h3 id="modal-title" class="text-2xl font-bold text-gray-800">ì•Œë¦¼</h3>
                </div>
                <div id="modal-body" class="text-gray-700 space-y-3">
                    <!-- Dynamic content here -->
                </div>
                <div class="mt-6 text-right">
                    <button onclick="closeModal()" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">í™•ì¸</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 1. ì‚¬ì´ë“œ ë‚´ë¹„ê²Œì´ì…˜ -->
    <nav class="w-64 bg-gray-800 text-white flex flex-col flex-shrink-0">
        <div class="p-6 text-3xl font-extrabold text-indigo-400 border-b border-gray-700">
            Coloso NOVA
        </div>
        <div class="flex flex-col p-4 space-y-2">
            <button id="tab-dashboard" onclick="setTab('dashboard')" class="tab-active flex items-center p-3 rounded-lg hover:bg-gray-700 transition duration-150">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M18.7 8l-4.2 4.5-5-5L6 15"/></svg>
                <span>Creator Dashboard</span>
            </button>
            <button id="tab-crm" onclick="setTab('crm')" class="flex items-center p-3 rounded-lg hover:bg-gray-700 transition duration-150">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="3" x2="12" y2="21"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                <span>Creator Contact Management</span>
            </button>
        </div>
        <div class="mt-auto p-4 text-xs text-gray-500 border-t border-gray-700">
            <p>Powered by Gemini LLM & Coloso Data</p>
        </div>
    </nav>

    <!-- 2. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <main id="main-content" class="flex-grow overflow-y-auto">
        <!-- Content will be rendered by JavaScript -->
    </main>
</body>
</html>
